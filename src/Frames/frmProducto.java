
package Frames;
import dao.daoProducto;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import clases.producto;
public class frmProducto extends javax.swing.JFrame {
daoProducto opro=new daoProducto("productos.txt");
    DefaultTableModel dtmAlumno = new DefaultTableModel();
    
    /**
     * Creates new form frmProducto
     */
    public frmProducto() {
        initComponents();
        llenaCabecera();
        opro.listar(dtmAlumno,tproducto);
        this.bloquear_estado(false);
        this.bloquear_controles();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        txtprod = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        txtprec = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        tproducto = new javax.swing.JTable();
        btnAñadir = new javax.swing.JButton();
        btnEliminar = new javax.swing.JButton();
        btnModificar = new javax.swing.JButton();
        btnBuscar = new javax.swing.JButton();
        btnCerrar = new javax.swing.JButton();
        jLabel5 = new javax.swing.JLabel();
        btnNuevo = new javax.swing.JButton();
        txtStock = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel2.setText("PRODUCTOS ");
        getContentPane().add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 20, -1, -1));

        jLabel3.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel3.setText("Producto:");
        getContentPane().add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 70, 130, -1));

        txtprod.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtprodActionPerformed(evt);
            }
        });
        getContentPane().add(txtprod, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 60, 266, 40));

        jLabel4.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel4.setText("Precio:");
        getContentPane().add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 120, 120, -1));

        txtprec.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtprecActionPerformed(evt);
            }
        });
        getContentPane().add(txtprec, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 110, 266, 40));

        tproducto.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        tproducto.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tproducto.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tproductoMouseClicked(evt);
            }
            public void mousePressed(java.awt.event.MouseEvent evt) {
                tproductoMousePressed(evt);
            }
        });
        jScrollPane1.setViewportView(tproducto);

        getContentPane().add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 260, 570, 100));

        btnAñadir.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        btnAñadir.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/button_anadir.jpg"))); // NOI18N
        btnAñadir.setBorderPainted(false);
        btnAñadir.setContentAreaFilled(false);
        btnAñadir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAñadirActionPerformed(evt);
            }
        });
        getContentPane().add(btnAñadir, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 450, 84, 40));

        btnEliminar.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        btnEliminar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/button_eliminar.jpg"))); // NOI18N
        btnEliminar.setContentAreaFilled(false);
        btnEliminar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEliminarActionPerformed(evt);
            }
        });
        getContentPane().add(btnEliminar, new org.netbeans.lib.awtextra.AbsoluteConstraints(510, 370, 130, -1));

        btnModificar.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        btnModificar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/button_modificar.jpg"))); // NOI18N
        btnModificar.setBorderPainted(false);
        btnModificar.setContentAreaFilled(false);
        btnModificar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnModificarActionPerformed(evt);
            }
        });
        getContentPane().add(btnModificar, new org.netbeans.lib.awtextra.AbsoluteConstraints(290, 450, 120, -1));

        btnBuscar.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        btnBuscar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/button_buscar.jpg"))); // NOI18N
        btnBuscar.setBorderPainted(false);
        btnBuscar.setContentAreaFilled(false);
        btnBuscar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBuscarActionPerformed(evt);
            }
        });
        getContentPane().add(btnBuscar, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 370, 84, 40));

        btnCerrar.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        btnCerrar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/button_cerrar.jpg"))); // NOI18N
        btnCerrar.setContentAreaFilled(false);
        btnCerrar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCerrarActionPerformed(evt);
            }
        });
        getContentPane().add(btnCerrar, new org.netbeans.lib.awtextra.AbsoluteConstraints(530, 450, 84, -1));

        jLabel5.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel5.setText("Stock:");
        getContentPane().add(jLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 180, -1, -1));

        btnNuevo.setFont(new java.awt.Font("Tahoma", 0, 18)); // NOI18N
        btnNuevo.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/button_nuevo.jpg"))); // NOI18N
        btnNuevo.setBorderPainted(false);
        btnNuevo.setContentAreaFilled(false);
        btnNuevo.setDefaultCapable(false);
        btnNuevo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnNuevoActionPerformed(evt);
            }
        });
        getContentPane().add(btnNuevo, new org.netbeans.lib.awtextra.AbsoluteConstraints(80, 370, 110, 40));
        getContentPane().add(txtStock, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 170, 260, 40));

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/productos.jpg"))); // NOI18N
        getContentPane().add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, 600));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnNuevoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnNuevoActionPerformed
    this.bloquear_estado(true);//Activo los controles
        txtprod.requestFocus();//el puntero del mouse sobre la caja de texto
        limpiar();//Limpiar las cajas de texto
        this.bloquear_controles1();  
    }//GEN-LAST:event_btnNuevoActionPerformed

    private void btnBuscarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBuscarActionPerformed
   txtprod.setEnabled(true);
   if(txtprod.getText().equals("")){
       JOptionPane.showMessageDialog(this,"No hay algo que buscar", "Sin resultado",2);
   txtprod.requestFocus();
    }else{
    int msg = JOptionPane.showConfirmDialog(this,"Deseas Buscar el Producto","Buscar",JOptionPane.YES_NO_OPTION);    
    if(msg == JOptionPane.YES_OPTION){
        producto a = opro.buscar(getNom_Pro());
        if(a == null){
            JOptionPane.showMessageDialog(this,"No se encuentro!!!");
            this.txtprod.requestFocus();
        }else{
            txtprod.setText(a.getProd());
            txtprec.setText("" + a.getPrec());
        }
    }
    else{
    
    }
    bloquear_controles2();
    bloquear_estado(true);
    }
        
    }//GEN-LAST:event_btnBuscarActionPerformed

    private void btnAñadirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAñadirActionPerformed
    int msg = JOptionPane.showConfirmDialog(this,"Deseas Añadir el Producto","Añadir",JOptionPane.YES_NO_OPTION);
    if(msg == JOptionPane.YES_OPTION){
        producto a = new producto(opro.getCorrelativo(),getNom_Pro(),getPrecio(),getStock());
        opro.adicionar(a);
        opro.listar(dtmAlumno, tproducto);
        opro.grabar();//Grabar datos al archivo
        JOptionPane.showMessageDialog(this,"Producto añadido Satisfactoriamente!!!");
    }
    else
    {
         txtprod.requestFocus();
        opro.listar(dtmAlumno, tproducto);
    }
    this.bloquear_controles(); 
     this.bloquear_estado(false);
    }//GEN-LAST:event_btnAñadirActionPerformed

    private void btnEliminarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEliminarActionPerformed
    int msg = JOptionPane.showConfirmDialog(this,"Deseas Eliminar el Producto","Eliminar",JOptionPane.YES_NO_OPTION);  
     if(msg == JOptionPane.YES_OPTION){
         producto a = opro.buscar(getNom_Pro());
         opro.eliminar(a);
         opro.listar(dtmAlumno, tproducto);
         opro.grabar();//Grabar datos al archivo
         JOptionPane.showMessageDialog(this,"Producto Eliminado!!!","Mensaje",2);
     }
    }//GEN-LAST:event_btnEliminarActionPerformed

    private void btnModificarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnModificarActionPerformed
    int msg = JOptionPane.showConfirmDialog(this,"Deseas Modificar el Producto","Modificar",JOptionPane.YES_NO_OPTION);
       if(msg == JOptionPane.YES_OPTION){
          producto a = opro.buscar(getNom_Pro());
          if(a != null){
              //modificar datos
              a.setPrec(getPrecio());
              opro.listar(dtmAlumno, tproducto);//actualizar la lista
              opro.grabar();//Grabar datos al archivo
              JOptionPane.showMessageDialog(this,"Producto Actualizado!!!","Mensaje",1);
          }else{
            JOptionPane.showMessageDialog(this,"No se encontro!!!","Mensaje",3);
          }
 
       }
    }//GEN-LAST:event_btnModificarActionPerformed

    private void btnCerrarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCerrarActionPerformed
    dispose();
    }//GEN-LAST:event_btnCerrarActionPerformed

    private void txtprecActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtprecActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtprecActionPerformed

    private void txtprodActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtprodActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtprodActionPerformed

    private void tproductoMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tproductoMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_tproductoMouseClicked

    private void tproductoMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tproductoMousePressed
        if(evt.getClickCount()==2){
//            frmFactura3 fac = new frmFactura3();
            int fil=tproducto.getSelectedRow();
            
            String m,n,ñ,o;
            m=tproducto.getValueAt(fil, 0).toString();
            n=tproducto.getValueAt(fil, 1).toString();
            ñ=tproducto.getValueAt(fil, 2).toString();
            o=tproducto.getValueAt(fil, 3).toString();
            
            frmFactura1.txtCod.setText(m);
            frmFactura1.txtPro.setText(n);
            frmFactura1.txtPrecio.setText(ñ);
            frmFactura1.txtStock.setText(o);
            System.out.print(tproducto.getValueAt(fil, 0).toString());
            this.dispose();    
        }
    
    }//GEN-LAST:event_tproductoMousePressed
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(frmProducto.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(frmProducto.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(frmProducto.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(frmProducto.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new frmProducto().setVisible(true);
            }
        });
    }
/*Obtener elementos de los objetos swing*/

    public String getNom_Pro()   {return txtprod.getText();}
    public double getPrecio()     {return Double.parseDouble(txtprec.getText());}
    public int getStock()       {return Integer.parseInt(txtStock.getText());   }
    
    //Agregar columnas al JTAble
    public void llenaCabecera(){
      dtmAlumno.addColumn("Codigo");
      dtmAlumno.addColumn("Producto");
      dtmAlumno.addColumn("Precio");
      dtmAlumno.addColumn("Stock");
      tproducto.setModel(dtmAlumno);
    }
    
    public void limpiar(){

        this.txtprod.setText("");
        this.txtprec.setText("");

    } 
        /*BLOQUEAR ACTIVAR*/
    public void bloquear_estado(boolean estado){

       this.txtprod.setEnabled(estado);
       this.txtprec.setEnabled(estado);
       this.txtStock.setEnabled(estado);


    }
     
   public void bloquear_controles(){
       btnNuevo.setEnabled(true);
       btnBuscar.setEnabled(true);

       btnAñadir.setEnabled(false);
       btnModificar.setEnabled(false);
       btnEliminar.setEnabled(false);
   } 
   public void bloquear_controles1(){
       btnNuevo.setEnabled(false);
       btnBuscar.setEnabled(true);

       btnAñadir.setEnabled(true);
       btnModificar.setEnabled(false);
       btnEliminar.setEnabled(false);
   }
   /*Buscar*/
   public void bloquear_controles2(){
       btnNuevo.setEnabled(true);
       btnBuscar.setEnabled(true);

       btnAñadir.setEnabled(false);
       btnModificar.setEnabled(true);
       btnEliminar.setEnabled(true);
   }
    /*Fin*/
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAñadir;
    private javax.swing.JButton btnBuscar;
    private javax.swing.JButton btnCerrar;
    private javax.swing.JButton btnEliminar;
    private javax.swing.JButton btnModificar;
    private javax.swing.JButton btnNuevo;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable tproducto;
    private javax.swing.JTextField txtStock;
    private javax.swing.JTextField txtprec;
    private javax.swing.JTextField txtprod;
    // End of variables declaration//GEN-END:variables
}
